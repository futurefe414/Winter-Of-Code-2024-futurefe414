<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="SastImg.Client.Views.ImageView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:SastImg.Client.Views"
    xmlns:api="using:SastImg.Client.Service.API"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Background="Transparent"
    mc:Ignorable="d">

    <Grid Padding="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Spacing="8" Margin="0,0,0,24">
            <TextBlock
                Style="{ThemeResource TitleLargeTextBlockStyle}"
                Text="{x:Bind ViewModel.AlbumTitle, Mode=OneWay}" />
            <TextBlock
                Style="{ThemeResource BodyTextBlockStyle}"
                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                Text="{x:Bind ViewModel.AlbumDescription, Mode=OneWay}"
                TextWrapping="Wrap" />
            <StackPanel Orientation="Horizontal" Spacing="8">
                <Button Content="Upload Images" Click="UploadImages_Click" />
                <Button Content="Edit Album" Click="EditAlbum_Click" />
            </StackPanel>
        </StackPanel>

        <ScrollViewer Grid.Row="1">
            <GridView
                x:Name="ImageGridView"
                ItemsSource="{x:Bind ViewModel.Images, Mode=OneWay}"
                IsItemClickEnabled="True"
                ItemClick="ImageGridView_ItemClick"
                SelectionMode="None">
                <GridView.ItemTemplate>
                    <DataTemplate x:DataType="api:ImageDto">
                        <Border
                            Width="200"
                            Height="240"
                            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                            BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                            BorderThickness="1"
                            CornerRadius="8">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="160" />
                                    <RowDefinition Height="*" />
                                </Grid.RowDefinitions>

                                <!-- Image Thumbnail -->
                                <Border
                                    Grid.Row="0"
                                    Background="{ThemeResource LayerFillColorDefaultBrush}"
                                    CornerRadius="8,8,0,0">
                                    <FontIcon
                                        Glyph="&#xEB9F;"
                                        FontSize="48"
                                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center" />
                                </Border>

                                <!-- Image Info -->
                                <StackPanel Grid.Row="1" Padding="12" Spacing="4">
                                    <TextBlock
                                        Style="{ThemeResource BodyStrongTextBlockStyle}"
                                        Text="{x:Bind Title}"
                                        TextWrapping="Wrap"
                                        MaxLines="2" />
                                    <TextBlock
                                        Style="{ThemeResource CaptionTextBlockStyle}"
                                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                        Text="{x:Bind UploadedAt}" />
                                </StackPanel>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </GridView.ItemTemplate>
            </GridView>
        </ScrollViewer>

        <ProgressRing
            Grid.Row="1"
            IsActive="{x:Bind ViewModel.IsLoading, Mode=OneWay}"
            Width="48"
            Height="48"
            HorizontalAlignment="Center"
            VerticalAlignment="Center" />
    </Grid>
</Page>
